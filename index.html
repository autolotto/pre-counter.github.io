<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pres Counter</title>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="/js/index.js"></script>
  <script>
    (function($){
      var ns, updateFrequency=2000, interval, hostName = '';

      ns = {
        services: {
          presCount: hostName + '/api/v1/prescount'
        },
        utils: {
          getPresCount: function(){
            var deferred = $.Deferred();
            $.ajax({
              url: this.services.presCount,
              type:"get",
              dataType: 'json',
              success: function (resp, status) {
                if(status === 'success'){
                  deferred.resolve(resp );
                }else{
                  deferred.reject( resp );
                }
              },
              error : deferred.reject
            });
            return deferred.promise();
          }
        },
        updateCounter: function(){
          this.utils.getPresCount().then( function(resp){
            $('#counter').html(resp);
          }, console.log );
        }
      };

      interval = setInterval($.proxy( ns.updateCounter, ns), updateFrequency);
    })(jQuery);
  </script>
</head>
<body>

<div id="counter">0</div>

</body>
</html>